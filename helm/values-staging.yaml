# Staging Environment Configuration
# Production-like resources for testing before prod deployment

image:
  repo: robotshop
  version: latest  # Use specific tags in staging to match prod
  pullPolicy: IfNotPresent

eum:
  key: null
  url: https://eum-eu-west-1.instana.io

psp:
  enabled: false

nodeport: false
openshift: false
ocCreateRoute: false

payment:
  gateway: null

redis:
  storageClassName: managed-csi
  resources:
    requests:
      cpu: 75m
      memory: 96Mi
    limits:
      cpu: 300m
      memory: 192Mi

# Staging resources with HPA enabled
cart:
  replicas: 1
  resources:
    requests:
      cpu: 40m
      memory: 96Mi
    limits:
      cpu: 300m
      memory: 192Mi
  autoscaling:
    enabled: true
    minReplicas: 1
    maxReplicas: 3
    targetCPUUtilizationPercentage: 70

catalogue:
  replicas: 1
  resources:
    requests:
      cpu: 40m
      memory: 96Mi
    limits:
      cpu: 300m
      memory: 192Mi
  autoscaling:
    enabled: true
    minReplicas: 1
    maxReplicas: 3
    targetCPUUtilizationPercentage: 70

dispatch:
  resources:
    requests:
      cpu: 40m
      memory: 96Mi
    limits:
      cpu: 300m
      memory: 192Mi

mongodb:
  resources:
    requests:
      cpu: 75m
      memory: 192Mi
    limits:
      cpu: 750m
      memory: 384Mi

mysql:
  resources:
    requests:
      cpu: 75m
      memory: 384Mi
    limits:
      cpu: 750m
      memory: 768Mi

payment:
  replicas: 1
  resources:
    requests:
      cpu: 40m
      memory: 96Mi
    limits:
      cpu: 300m
      memory: 192Mi
  autoscaling:
    enabled: true
    minReplicas: 1
    maxReplicas: 3
    targetCPUUtilizationPercentage: 70

rabbitmq:
  resources:
    requests:
      cpu: 75m
      memory: 192Mi
    limits:
      cpu: 300m
      memory: 384Mi

ratings:
  resources:
    requests:
      cpu: 40m
      memory: 96Mi
    limits:
      cpu: 300m
      memory: 192Mi

shipping:
  replicas: 1
  resources:
    requests:
      cpu: 40m
      memory: 384Mi
    limits:
      cpu: 300m
      memory: 768Mi
  autoscaling:
    enabled: true
    minReplicas: 1
    maxReplicas: 3
    targetCPUUtilizationPercentage: 70

user:
  replicas: 1
  resources:
    requests:
      cpu: 40m
      memory: 96Mi
    limits:
      cpu: 300m
      memory: 192Mi
  autoscaling:
    enabled: true
    minReplicas: 1
    maxReplicas: 3
    targetCPUUtilizationPercentage: 70

web:
  replicas: 2
  resources:
    requests:
      cpu: 40m
      memory: 96Mi
    limits:
      cpu: 300m
      memory: 192Mi
  autoscaling:
    enabled: true
    minReplicas: 2
    maxReplicas: 5
    targetCPUUtilizationPercentage: 70
