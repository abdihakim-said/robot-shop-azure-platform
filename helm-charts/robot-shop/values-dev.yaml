# Global values override individual chart values
global:
  imageRegistry: robotshopacr.azurecr.io
  imageTag: dev-f35465f6ca5fe3f0f5ed6d386bd1f5c9142af735
  imagePullPolicy: Always
  environment: dev

# Individual services inherit from global
cart:
  enabled: true
catalogue:
  enabled: true
user:
  enabled: true
payment:
  enabled: true
shipping:
  enabled: true
ratings:
  enabled: true
dispatch:
  enabled: true
web:
  enabled: true

# Infrastructure services
redis:
  enabled: true
rabbitmq:
  enabled: true
mongodb:
  enabled: true
mysql:
  enabled: true
  replicas: 1
  service:
    type: ClusterIP
  resources:
    requests:
      cpu: 30m
      memory: 64Mi
    limits:
      cpu: 200m
      memory: 256Mi

web:
  enabled: true
  replicas: 1
  service:
    type: ClusterIP
  ingress:
    enabled: true
    className: nginx
    annotations:
      nginx.ingress.kubernetes.io/rewrite-target: /
      nginx.ingress.kubernetes.io/ssl-redirect: "false"
    hosts:
      - host: robot-shop.robot-shop-dev.com
        paths:
          - path: /
            pathType: Prefix
            service: web
            port: 8080
  resources:
    requests:
      cpu: 30m
      memory: 64Mi
    limits:
      cpu: 200m
      memory: 128Mi
  monitoring:
    enabled: true

# Minimal resources for dev infrastructure
redis:
  enabled: true
  auth:
    enabled: false  # Disabled for dev simplicity
  resources:
    requests:
      cpu: 20m
      memory: 32Mi
    limits:
      cpu: 100m
      memory: 64Mi

mysql:
  enabled: true
  auth:
    rootPassword: "dev-password"  # Simple password for dev
  resources:
    requests:
      cpu: 50m
      memory: 128Mi
    limits:
      cpu: 200m
      memory: 256Mi

mongodb:
  enabled: true
  auth:
    enabled: false  # Disabled for dev
  resources:
    requests:
      cpu: 50m
      memory: 128Mi
    limits:
      cpu: 200m
      memory: 256Mi

rabbitmq:
  enabled: true
  auth:
    username: guest
    password: guest  # Default for dev
  resources:
    requests:
      cpu: 30m
      memory: 64Mi
    limits:
      cpu: 150m
      memory: 128Mi

# All services get updated tags via GitOps
cart:
  image:
    tag: "latest"
catalogue:
  image:
    tag: "latest"
user:
  image:
    tag: "latest"
payment:
  image:
    tag: "latest"
shipping:
  image:
    tag: "latest"
ratings:
  image:
    tag: "latest"
dispatch:
  image:
    tag: "latest"
