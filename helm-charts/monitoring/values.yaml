# Monitoring chart values
prometheus:
  enabled: true  # Enable the full stack since operator is in Terraform

# Configure the monitoring stack (operator already installed via Terraform)
kube-prometheus-stack:
  prometheus:
    enabled: true
    prometheusSpec:
      serviceMonitorSelectorNilUsesHelmValues: false
      ruleSelectorNilUsesHelmValues: false
  
  alertmanager:
    enabled: true
  
  grafana:
    enabled: true
    admin:
      existingSecret: "grafana-admin-secret"
      userKey: "admin-user"
      passwordKey: "admin-password"
    extraSecretMounts:
      - name: grafana-secrets-store
        secretName: grafana-admin-secret
        defaultMode: 0400
        mountPath: /mnt/secrets-store
        readOnly: true
        csi:
          driver: secrets-store.csi.k8s.io
          readOnly: true
          volumeAttributes:
            secretProviderClass: grafana-secrets
    # Password will be retrieved from Key Vault via SecretProviderClass
    admin:
      existingSecret: "grafana-admin-secret"
      userKey: "admin-user"
      passwordKey: "admin-password"
  
  prometheusOperator:
    enabled: false  # Already installed via Terraform - CRITICAL: Avoid conflict
